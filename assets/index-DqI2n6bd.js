(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}})();const{gsap:t,MorphSVGPlugin:D,Draggable:v}=window;t.registerPlugin(D,v);const b=["./resources/Desktop View Lamp Off.png","./resources/Desktop View Lamp On.png","./resources/Mobile View Lamp Off.png","./resources/Mobile View Lamp On.png"];let u=0;const O=b.length;function I(){return new Promise(o=>{b.forEach(n=>{const i=new Image;i.onload=()=>{u++,u===O&&o()},i.onerror=()=>{u++,console.warn("Failed to preload:",n),u===O&&o()},i.src=n})})}const c={CLICK:new Audio("https://assets.codepen.io/605876/click.mp3"),BUZZ:new Audio("https://assets.codepen.io/16327/flicker_1.mp3")};c.BUZZ.load();c.CLICK.load();const m={ON:!1},x=.1,l=document.querySelectorAll(".toggle-scene__cord"),g=document.querySelector(".toggle-scene__hit-spot"),d=document.querySelector(".toggle-scene__dummy-cord"),p=document.querySelector(".toggle-scene__dummy-cord line"),T=document.createElement("div"),f=p.getAttribute("x2"),y=p.getAttribute("y2"),h=()=>{t.set(T,{x:f,y})};h();t.set(d,{display:"none"});t.set(l[0],{display:"block"});const U=t.timeline({paused:!0,onStart:()=>{m.ON=!m.ON,t.set(document.documentElement,{"--on":m.ON?1:0});const o=document.getElementById("favicon"),n=document.querySelector(".flicker-overlay");window.flickerTimeline&&window.flickerTimeline.kill(),t.killTweensOf(c.BUZZ),m.ON?(document.body.classList.add("light-on"),document.title="Light is On",o.href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚òÄÔ∏è</text></svg>",c.CLICK.currentTime=0,c.CLICK.play().catch(i=>console.log("Click fail",i)),c.BUZZ.volume=1,c.BUZZ.currentTime=0,c.BUZZ.play().catch(i=>console.log("Buzz failed - interaction needed?",i)),window.flickerTimeline=t.timeline({onComplete:()=>{t.to(c.BUZZ,{volume:0,duration:1.5,onComplete:()=>{c.BUZZ.pause(),c.BUZZ.volume=1}})}}),window.flickerTimeline.set(n,{opacity:.6}).set(n,{opacity:.1},"+=0.12").set(n,{opacity:.7},"+=0.08").set(n,{opacity:.65},"+=0.15").set(n,{opacity:.2},"+=0.08").set(n,{opacity:0},"+=0.2")):(document.body.classList.remove("light-on"),document.title="Light is Off",o.href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåë</text></svg>",c.BUZZ.pause(),c.BUZZ.currentTime=0,c.BUZZ.volume=1,c.CLICK.currentTime=0,c.CLICK.play().catch(i=>console.log("Click fail",i)),t.set(n,{opacity:0})),t.set([d,g],{display:"none"}),t.set(l[0],{display:"block"})},onComplete:()=>{t.set([d,g],{display:"block"}),t.set(l[0],{display:"block"}),t.set(d,{display:"none"}),h()}});for(let o=1;o<l.length;o++)U.add(t.to(l[0],{morphSVG:l[o],duration:x,repeat:1,yoyo:!0}));v.create(T,{trigger:g,type:"x,y",onPress:o=>{Z=o.x||o.clientX,C=o.y||o.clientY,t.set(l[0],{display:"none"}),t.set(d,{display:"block"})},onDrag:function(){const n=parseFloat(f),i=parseFloat(y);let r=this.x,e=this.y;const s=r-n,a=e-i,w=Math.sqrt(s*s+a*a);if(w>200){const L=200/w;r=n+s*L,e=i+a*L}t.set(p,{attr:{x2:r,y2:e}})},onRelease:function(o){const n=o.x||o.clientX,i=o.y||o.clientY,r=Math.abs(n-Z),e=Math.abs(i-C),s=Math.sqrt(r*r+e*e);t.to(p,{attr:{x2:f,y2:y},duration:x,onComplete:()=>{s>50?U.restart():(h(),t.set(d,{display:"none"}),t.set(l[0],{display:"block"}))}})}});let Z,C;I().then(()=>{console.log("All background images preloaded!"),document.body.classList.add("images-loaded")});
